#!/bin/sh
set -e

case "$1" in
remove | purge)
	[ -d /usr/lib/distiller-update/.venv ] &&
		rm -rf /usr/lib/distiller-update/.venv
	[ -f /etc/update-motd.d/99-distiller-updates ] &&
		rm -f /etc/update-motd.d/99-distiller-updates

	[ "$1" = "purge" ] && {
		# Clean up cache and configuration
		[ -d /var/cache/distiller-update ] && rm -rf /var/cache/distiller-update
		[ -d /etc/distiller-update ] && rm -rf /etc/distiller-update

		# Clean up uv cache to save disk space
		uv cache clean || true
	}
	;;

upgrade | failed-upgrade | abort-install | abort-upgrade | disappear) ;;

*)
	echo "ERROR: postrm called with unknown argument \`$1'" >&2
	exit 1
	;;
esac

#DEBHELPER#

exit 0
